<style>
    .comment {
        margin-left: 20px;
    }

    .children {
        margin-left: 4vw;
    }
</style>

<?php
$comments = $this->getComments();
$saveUrl = Mage::getUrl('*/*/save');
?>

<script src="https://cdn.ckeditor.com/4.16.0/standard/ckeditor.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/prototype/1.7.3.0/prototype.js"></script>

<div id="comment-section">
    <table id="comment-container">
        <?php echo $this->renderComments($comments, 0); ?>
    </table>
    <button id="add-initial-comment" class="add-initial">Add Initial Comment</button>
</div>

<script type="text/javascript">
document.observe('dom:loaded', function() {
    new CommentSystem({
        containerId: 'comment-container',
        addInitialCommentButtonId: 'add-initial-comment',
        saveUrl: '<?php echo $saveUrl; ?>'
    });

    $$('.comment textarea').each(function(textarea) {
        CKEDITOR.replace(textarea);
    });
});
</script>
